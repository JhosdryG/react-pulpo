"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),PropTypes=_interopDefault(require("prop-types")),reactFontawesome=require("@fortawesome/react-fontawesome"),freeSolidSvgIcons=require("@fortawesome/free-solid-svg-icons"),styled=_interopDefault(require("styled-components")),DataTable=function(e){var t=e.data,n=e.properties,r=e.deleteRow,o=e.updateRow;return React__default.createElement("div",{className:"div-data-table"},React__default.createElement("table",{className:"data-table"},React__default.createElement("thead",null,React__default.createElement("tr",null,n.map(function(e){return"id"===e?null:React__default.createElement("th",{key:e},e)}),o&&React__default.createElement("td",null),r&&React__default.createElement("td",null))),React__default.createElement("tbody",null,t.map(function(n,e){return React__default.createElement("tr",{key:e},Object.keys(n).map(function(e,t){return"id"===e?null:React__default.createElement("td",{key:t},n[e])}),o&&React__default.createElement("td",{onClick:function(){return o(n.id)}},React__default.createElement(reactFontawesome.FontAwesomeIcon,{icon:freeSolidSvgIcons.faEdit,className:"update-icon"})),r&&React__default.createElement("td",{onClick:function(){return r(n.id)}},React__default.createElement(reactFontawesome.FontAwesomeIcon,{icon:freeSolidSvgIcons.faTimesCircle,className:"delete-icon"})))}))))};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _taggedTemplateLiteral(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _templateObject(){var e=_taggedTemplateLiteral(["\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  margin: ",";\n  width: ",";\n  font-family: ",";\n\n  & > [type='text'] {\n    padding: ",";\n    font-size: ",";\n    color: ",";\n    border: none;\n    border-top: ",";\n    border-left: ",";\n    border-bottom: ",";\n    border-right: ",";\n    outline: ",";\n    background-color: ",";\n    box-shadow: ",";\n    z-index: 2001;\n    ",";\n  }\n\n  & .filter {\n    position: relative;\n    box-sizing: border-box;\n\n    & > ul {\n      box-sizing: border-box;\n      position: absolute;\n      top: -20px;\n      left: 0;\n      width: ",";\n      list-style: none;\n      margin: 0;\n      padding: 0;\n      max-height: 200px;\n      border: ",";\n      border-top: none;\n      border-radius: ",";\n      box-shadow: ",";\n      overflow: auto;\n      z-index: 1000;\n      ",";\n\n      & > li {\n        cursor: pointer;\n        padding: ",";\n        background-color: ",";\n        color: ",";\n        ","\n\n        &:first-child {\n          padding-top: ","px;\n        }\n\n        &:last-child {\n          border-radius: ",";\n        }\n\n        &.current {\n          background-color: ",";\n          color: ",";\n          font-weight: ",";\n          font-size: ",";\n          ","\n        }\n      }\n\n      & > .no-match {\n        color: ",";\n        ","\n      }\n    }\n  }\n"]);return _templateObject=function(){return e},e}DataTable.displayName="DataTable",DataTable.propTypes={data:PropTypes.arrayOf(PropTypes.object).isRequired,properties:PropTypes.arrayOf(PropTypes.string).isRequired,deleteRow:PropTypes.func,updateRow:PropTypes.func};var StyleSelectFilter=styled.div.attrs(function(e){var t=_objectSpread2({},e.style);return{style:_objectSpread2({},{divMargin:t.divMargin||"10px 10px 0 10px",divWidth:t.divWidth||"300px",divFont:t.divFont||"'Arial', Sans-Serif",divOthers:t.divOthers||"",inputPadding:t.inputPadding||"8px",inputFontSize:t.inputFontSize||"1rem",inputColor:t.inputColor||"rgb(60,60,60)",inputBorderTop:t.inputBorderTop||"none",inputBorderLeft:t.inputBorderLeft||"none",inputBorderBot:t.inputBorderBot||"3px solid #66d0dd",inputBorderRight:t.inputBorderRight||"none",inputOutline:t.inputOutline||"#66d0dd auto 3px",inputBackground:t.inputBackground||"fff",inputShadow:t.inputShadow||"0 0 5px rgba(0,0,0,.3)",inputOthers:t.inputOthers||"",listBorder:t.listBorder||"2px solid #66d0dd",listBorderRound:t.listBorderRound?"0 0 8px 8px":"0 0 0 0",listOthers:t.listOthers||"",itemPadding:t.itemPadding||"10px",itemBackground:t.itemBackground||"#fff",itemColor:t.itemColor||"rgb(60,60,60)",itemOthers:t.itemOthers||"",currentBackground:t.currentBackground||"#66d0dd",currentColor:t.currentColor||"#fff",currentFontWeight:t.currentFontWeight||"bold",currentFontSize:t.currentFontSize||"1.1rem",currentOthers:t.currentOthers||"",noMatchColor:t.noMatchColor||"rgb(180,180,180)",noMatchOthers:t.noMatchOthers||""})}})(_templateObject(),function(e){return e.style.divMargin},function(e){return e.style.divWidth},function(e){return e.style.divFont},function(e){return e.style.inputPadding},function(e){return e.style.inputFontSize},function(e){return e.style.inputColor},function(e){return e.style.inputBorderTop},function(e){return e.style.inputBorderLeft},function(e){return e.style.inputBorderBot},function(e){return e.style.inputBorderRight},function(e){return e.style.inputOutline},function(e){return e.style.inputBackground},function(e){return e.style.inputShadow},function(e){return e.style.inputOthers},function(e){return e.style.divWidth},function(e){return e.style.listBorder},function(e){return e.style.listBorderRound},function(e){return e.style.inputShadow},function(e){return e.style.listOthers},function(e){return e.style.itemPadding},function(e){return e.style.itemBackground},function(e){return e.style.itemColor},function(e){return e.style.itemOthers},function(e){return parseInt(e.style.itemPadding.replace("px",""))+20},function(e){return e.style.listBorderRound},function(e){return e.style.currentBackground},function(e){return e.style.currentColor},function(e){return e.style.currentFontWeight},function(e){return e.style.currentFontSize},function(e){return e.style.currentOthers},function(e){return e.style.noMatchColor},function(e){return e.style.noMatchOthers}),SelectFilter=React__default.forwardRef(function(e,t){var n=e.data,a=e.filter,r=e.ListComponent,o=e.onSelect,i=e.onChange,u=e.showAtOnce,l=e.placeholder,c=e.noMatchMessage,s=e.style,d=e.setOptions,p=e.disableFunc,f=_slicedToArray(React.useState(n),2),y=f[0],b=f[1],m=_slicedToArray(React.useState(0),2),h=m[0],g=m[1],_=_slicedToArray(React.useState(""),2),R=_[0],v=_[1],O=_slicedToArray(React.useState([]),2),T=O[0],x=O[1],S=_slicedToArray(React.useState(!1),2),w=S[0],P=S[1],k=React.useRef(null);React.useEffect(function(){if(p){var e=n.map(function(e){return _objectSpread2({},e,{disable:p(e)})});b(e)}else b(n)},[n,p]),React.useEffect(function(){d&&d({clean:function(){v(""),g(0),P(!1)}})},[d]),React.useEffect(function(){if(!w){if(1===R.length&&" "===R.charAt(0))return void v("");var e=[];if(""===R&&u||""!==R){for(var t,n=/\W/gi,r="^".concat(R.toLowerCase().trim()),o=[];null!==(t=n.exec(R));)o.includes(t[0])||(r=r.replace(RegExp("\\".concat(t[0]),"gi"),"\\".concat(t[0])),o.push(t[0]));e=y.filter(function(e){return new RegExp(r).test(e[a].toLowerCase().trim())})}x(e),k.current&&k.current.scroll(0,0)}},[R,y,u,a,w]);function E(e){g(e)}function C(){j(h)}var j=function(e){T[e]&&(T[e].disable||(o(T[e]),v(T[e][a]),x([]),g(0),P(!0)))};return React__default.createElement(StyleSelectFilter,{style:s},React__default.createElement("input",{type:"text",spellCheck:"false",placeholder:l,onKeyDown:function(e){38===e.keyCode?(e.preventDefault(),0<h&&(g(function(e){return e-1}),document.querySelector(".filter > ul > .current").scrollIntoView({block:"end",behavior:"smooth"}))):40===e.keyCode&&h<T.length-1&&(""!==R||u)&&!w?(g(function(e){return e+1}),document.querySelector(".filter > ul > .current").scrollIntoView({block:"start",behavior:"smooth"})):32===e.keyCode?0!==R.length&&!R.endsWith(" ")||e.preventDefault():13===e.keyCode&&j(h)},onChange:function(e){v(e.target.value),g(0),P(!1),i&&i()},value:R,ref:t}),(0<R.length||u)&&!w&&React__default.createElement("div",{className:"filter"},React__default.createElement("ul",{ref:k},!w&&T.map(function(e,t){return React__default.createElement(r,{key:t,index:t,current:h===t,data:e,onMouseEnter:E,onClick:C})}),0===T.length&&0<R.length&&!w&&React__default.createElement("li",{className:"no-match"},c))))});SelectFilter.displayName="SelectFilter",SelectFilter.defaultProps={showAtOnce:!1,placeholder:"",noMatchMessage:"No se han encontrado resultados"},SelectFilter.propTypes={data:PropTypes.arrayOf(PropTypes.object).isRequired,filter:PropTypes.string.isRequired,ListComponent:PropTypes.any.isRequired,onSelect:PropTypes.func.isRequired,onChange:PropTypes.func,showAtOnce:PropTypes.bool,placeholder:PropTypes.string,noMatchMessage:PropTypes.string,style:PropTypes.object,setOptions:PropTypes.func,disableFunc:PropTypes.func};var QuantityInput=React__default.forwardRef(function(e,t){var n=e.maxNumber,r=e.minNumber,o=e.handleAccept,a=e.labelText,i=e.buttonText,u=_slicedToArray(React.useState(!1),2),l=u[0],c=u[1],s=_slicedToArray(React.useState(""),2),d=s[0],p=s[1],f=React.useRef();return React__default.createElement("div",{className:"quantity-input"},React__default.createElement("label",{htmlFor:"quantity"},a,React__default.createElement("input",{type:"text",onKeyUp:function(e){13===e.keyCode&&l?f.current.focus():l||c(!0)},ref:t,onKeyDown:function(e){/\d/.test(e.key)?parseInt(e.target.value+e.key,10)<=n&&parseInt(e.target.value+e.key,10)>=r&&p(e.target.value+e.key):8===e.keyCode&&p(function(e){return e.substr(0,e.length-1)})},value:d})),React__default.createElement("button",{type:"button",onClick:function(){return o(d)},ref:f,className:"quantity-input_button",disabled:""===d},i))});QuantityInput.displayName="QuantityInput",QuantityInput.defaultProps={minNumber:1,maxNumber:100,labelText:"Cantidad",buttonText:"Añadir"},QuantityInput.propTypes={minNumber:PropTypes.number,maxNumber:PropTypes.number,handleAccept:PropTypes.func.isRequired,labelText:PropTypes.string,buttonText:PropTypes.string},exports.DataTable=DataTable,exports.QuantityInput=QuantityInput,exports.SelectFilter=SelectFilter;
